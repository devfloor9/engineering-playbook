---
title: "EKS Hybrid Nodes 공유 파일 스토리지 솔루션"
sidebar_label: "파일 스토리지"
description: "EKS Hybrid Nodes 환경에서 공유 파일 스토리지 구현을 위한 포괄적 가이드로, AWS 관리형 서비스, 엔터프라이즈 스토리지 통합 및 Amazon Linux 2023 대체 접근법을 다룹니다."
tags: [eks, hybrid-nodes, storage, efs, fsx, nfs, amazon-linux-2023]
category: "hybrid-multicloud"
date: 2025-09-15
authors: [devfloor9]
sidebar_position: 4
---

# EKS Hybrid Nodes 공유 파일 스토리지 솔루션

> 📅 **작성일**: 2025-09-15 | ⏱️ **읽는 시간**: 약 17분


## 개요

하이브리드 환경에서 공유 파일 스토리지는 여러 노드 간 데이터 공유, 상태 저장 애플리케이션 운영, 그리고 클라우드와 온프레미스 간 데이터 일관성 유지를 위한 핵심 구성 요소입니다. Amazon Linux 2023에서 전통적인 고가용성 클러스터링 패키지(pacemaker, corosync)가 제거되면서, 기존의 NFS 클러스터 구성 방식에 변화가 필요한 상황입니다.

본 문서는 이러한 변화에 대응하여 EKS Hybrid Nodes 환경에서 효과적인 공유 파일 스토리지 솔루션을 제시하며, 2025년 현재 최신 정보를 반영합니다.

## 기술적 배경 및 현황 분석

### Amazon Linux 2023 패키지 정책 변화

Amazon Linux 2에서 Amazon Linux 2023으로 전환하면서 다음과 같은 클러스터링 관련 패키지들이 제거되었습니다:

- `corosync` 및 관련 라이브러리 (`corosynclib`, `corosync-qdevice`, `corosync-qnetd`)
- `pacemaker` 전체 패키지 세트 (`pacemaker-cli`, `pacemaker-cluster-libs`, `pacemaker-remote` 등)

이러한 변화는 AWS의 전략적 방향성을 반영합니다. 복잡한 인프라 수준의 클러스터링 대신 검증된 관리형 서비스를 통해 더 높은 안정성과 운영 효율성을 제공하고자 하는 것입니다.

### EKS Hybrid Nodes 지원 운영체제 (2025년 업데이트)

2024년 12월 EKS Hybrid Nodes가 정식 출시(GA)될때 언급된 지원 운영체제는 다음과 같습니다.

**공식 지원 운영체제 (2025년 기준):**

- **Amazon Linux 2023**: AWS 최적화 운영체제, 온프레미스에서는 가상화 환경에서만 사용 가능
- **Ubuntu**: 20.04, 22.04, 24.04 LTS 버전 지원
- **Red Hat Enterprise Linux (RHEL)**: 8, 9 버전 지원

**중요한 변경사항:**

- **Bottlerocket 지원 중단**: 2025년 현재 공식 지원 목록에서 제외됨
- **Rocky Linux**: 여전히 공식 지원 목록에 포함되지 않아 AWS Support 범위를 벗어남

**지원 범위:**

- AWS는 EKS Hybrid 통합 기능만 지원하며, 운영체제 자체에 대한 지원은 각 벤더의 책임
- 하이브리드 노드 연결 및 관리 기능에 대해서만 AWS Support 제공

## 공유 파일 스토리지 솔루션 아키텍처

### 1. AWS 관리형 서비스 기반 솔루션

### Amazon EFS (Elastic File System)

Amazon EFS는 EKS Hybrid Nodes 환경에서 가장 권장되는 공유 파일 스토리지 솔루션입니다.

**핵심 특징:**

- NFSv4.1 프로토콜 지원으로 기존 NFS 클라이언트와 호환
- 자동 확장/축소로 용량 관리 불필요
- 다중 가용 영역에 걸친 자동 복제로 99.999999999% (11 9's) 내구성 제공
- 전송 중 및 저장 시 암호화 지원

**하이브리드 연결 방법:**

- AWS Direct Connect 또는 VPN을 통한 프라이빗 연결
- EFS Mount Helper를 통한 최적화된 마운트 성능
- EFS CSI Driver를 통한 Kubernetes 네이티브 통합

**구현 고려사항:**

- 온프레미스에서 EFS 액세스 시 네트워크 지연시간 고려 필요
- 대역폭 사용량에 따른 네트워크 비용 계산
- 백업 및 라이프사이클 정책 설정

### Amazon FSx

고성능이 요구되는 워크로드의 경우 Amazon FSx를 고려할 수 있습니다.

**FSx for Lustre:**

- 고성능 컴퓨팅(HPC) 및 AI/ML 워크로드에 최적화
- S3와의 네이티브 통합으로 데이터 티어링 지원
- 수백 GB/s 처리량과 수백만 IOPS 지원
- 2025년 현재 GenAI 추론 워크로드에서 활용 사례 증가

**FSx for NetApp ONTAP:**

- 기존 NetApp 환경과의 호환성
- 멀티 프로토콜 지원 (NFS, SMB, iSCSI)
- 고급 데이터 관리 기능 (스냅샷, 클론, 복제)

**FSx for OpenZFS:**

- 고성능 NFS 워크로드 지원
- 압축 및 중복제거를 통한 스토리지 효율성
- 스냅샷 및 백업 기능 내장

### 2. 엔터프라이즈 스토리지 통합 솔루션

기존 온프레미스 스토리지 투자를 활용하면서 Kubernetes 환경과 통합하는 방안입니다.

### CSI Driver 기반 통합

**NetApp Trident:**

- ONTAP, Cloud Volumes ONTAP, Azure NetApp Files 지원
- 동적 볼륨 프로비저닝 및 스냅샷 관리
- 데이터 보호 및 재해복구 기능 내장

**Dell PowerScale CSI:**

- OneFS 기반 스케일아웃 NAS 통합
- 고성능 및 대용량 스토리지 요구사항 충족
- 멀티 테넌시 및 QoS 지원

**Pure Storage CSI:**

- FlashBlade 및 FlashArray 통합
- 올플래시 성능과 데이터 압축/중복제거
- 클라우드 네이티브 데이터 서비스

### 구현 아키텍처

엔터프라이즈 스토리지 통합 시 다음과 같은 아키텍처를 권장합니다:

1. **스토리지 백엔드 구성**: 온프레미스 스토리지 시스템에서 NFS 익스포트 또는 iSCSI 타겟 구성
2. **CSI Driver 배포**: Kubernetes 클러스터에 해당 벤더의 CSI Driver 설치
3. **StorageClass 정의**: 동적 프로비저닝을 위한 스토리지 클래스 구성
4. **네트워크 최적화**: 스토리지 트래픽을 위한 전용 네트워크 세그먼트 구성

### 3. 하이브리드 운영체제 기반 솔루션

특별한 요구사항이나 기존 운영 노하우를 활용해야 하는 경우의 대안입니다.

### Ubuntu/RHEL 기반 전통적 NFS 클러스터

**Ubuntu 22.04 LTS 활용:**

- `pacemaker`, `corosync`, `nfs-kernel-server` 패키지 지원
- 5년간 장기 지원으로 안정적인 운영 환경 제공
- 광범위한 커뮤니티 지원과 문서화

**RHEL 9 활용:**

- 엔터프라이즈급 지원과 보안 업데이트
- Red Hat의 고가용성 애드온 활용 가능
- 기존 RHEL 운영 경험 활용

**구현 시 고려사항:**

- 클러스터 노드 간 네트워크 분할 시나리오 대응
- 스토리지 백엔드의 고가용성 구성
- 정기적인 클러스터 상태 모니터링 및 유지보수

## 실제 구현 사례 및 레퍼런스

### Dell PowerFlex + EKS Hybrid Nodes

Dell Technologies에서 수행한 공식 레퍼런스 구현으로, PostgreSQL 데이터베이스를 EKS Hybrid Nodes 환경에서 PowerFlex 스토리지와 연동하여 운영한 사례입니다.

**성능 결과:**

- 238,804 read IOPS 달성
- 평균 0.638ms 응답 지연시간
- 동시 세션 수 확장성 검증

**아키텍처 특징:**

- PowerFlex CSI Driver를 통한 동적 볼륨 프로비저닝
- 소프트웨어 정의 스토리지의 유연성과 Kubernetes 네이티브 통합
- 하이브리드 환경에서 일관된 스토리지 관리 경험

### Superbet (Happening) 분산 엣지 사례

게임 및 스포츠 베팅 플랫폼인 Superbet에서 EKS Hybrid Nodes를 활용하여 분산된 엣지 환경을 관리하는 사례입니다.

**구현 목적:**

- 지역별 규제 요구사항 준수를 위한 데이터 로컬라이제이션
- 중앙 집중식 Kubernetes 관리를 통한 운영 효율성 향상
- 엣지 위치에서의 낮은 지연시간 서비스 제공

**스토리지 전략:**

- 로컬 캐시를 위한 고성능 스토리지
- 중앙 데이터 동기화를 위한 네트워크 스토리지
- 컴플라이언스 요구사항을 충족하는 데이터 보호

## Amazon Repository 패키지 추가 요청 프로세스

### 패키지 추가 요청 가능성

Amazon Linux 2023 리포지토리에 특정 패키지(예: pacemaker, corosync) 추가 요청은 기술적으로 가능하지만, 현실적으로는 매우 제한적입니다.

### 공식 요청 절차

**AWS Support를 통한 요청:**

- AWS Support Console에서 "Feature Request" 또는 "Technical Support" 케이스 생성
- 패키지 추가 요청 시 다음 정보 필수 포함:
  - 구체적인 비즈니스 케이스 및 사용 사례
  - 예상 사용자 수 및 시장 수요 분석
  - 기존 대안 솔루션 검토 결과 및 한계점
  - 보안 영향 평가 및 취약점 분석
  - 장기적인 유지보수 및 지원 계획

### 현실적 기대치 및 제약사항

**검토 프로세스:**

- 초기 검토: 2-4주 (기본적인 타당성 검토)
- 상세 평가: 3-6개월 (보안, 호환성, 의존성 분석)
- 구현 및 테스트: 6-12개월 (승인 시)
- 전체 프로세스: 최소 1년 이상 소요

**승인 가능성:**

- AWS의 전략적 방향성과 일치해야 함
- 상당한 고객 수요와 비즈니스 가치 입증 필요
- 보안 및 안정성 기준 충족
- 장기적인 유지보수 비용 대비 효과 검증

**AWS의 우선순위:**

- 관리형 서비스 사용을 통한 문제 해결 우선 권장
- 클라우드 네이티브 접근법 채택 유도
- 복잡한 인프라 관리보다는 비즈니스 로직에 집중할 수 있는 솔루션 제시

### 대안 접근 방법

**소스 컴파일 방식 (권장하지 않음):**

Amazon Linux 2023에서 직접 소스 컴파일을 통한 패키지 설치는 기술적으로 가능하지만 다음과 같은 심각한 문제점들이 있습니다:

- **복잡한 의존성 관리**: 수십 개의 의존 라이브러리와 개발 도구 필요
- **보안 업데이트 누락**: 수동으로 보안 패치를 추적하고 적용해야 함
- **시스템 안정성 위험**: 검증되지 않은 바이너리로 인한 시스템 불안정 가능성
- **운영 복잡성 증가**: 업그레이드, 백업, 복구 과정의 복잡성 급증
- **지원 범위 제외**: AWS Support에서 문제 해결 지원 불가

**권장 대안:**

1. **지원 OS 활용**: Ubuntu 22.04 LTS 또는 RHEL 9에서 필요 패키지 사용
2. **관리형 서비스**: Amazon EFS, FSx 등 AWS 네이티브 솔루션 채택
3. **엔터프라이즈 솔루션**: 검증된 3rd party 스토리지 솔루션과 CSI Driver 통합

### 패키지 요청 시 고려사항

**성공 확률을 높이는 요소:**

- 다수의 엔터프라이즈 고객으로부터의 동일한 요청
- 명확한 기술적 필요성과 대안 부재 입증
- AWS 파트너 에코시스템과의 연계성
- 오픈소스 커뮤니티의 광범위한 지원

**실패 가능성이 높은 요소:**

- 단일 고객 또는 소수 고객만의 요구사항
- 기존 AWS 서비스로 해결 가능한 문제
- 보안 또는 안정성 우려가 있는 패키지
- 유지보수 부담이 큰 레거시 소프트웨어

## 비용 최적화 전략

### 솔루션별 비용 구조 분석

### 비용 최적화 권장사항

**단기 전략:**

- 워크로드 특성에 맞는 적절한 성능 모드 선택
- 사용하지 않는 데이터에 대한 라이프사이클 정책 적용
- 네트워크 트래픽 최적화를 통한 데이터 전송 비용 절감

**장기 전략:**

- 데이터 티어링을 통한 스토리지 비용 최적화
- 예약 인스턴스나 Savings Plans 활용
- 멀티 클라우드 전략 수립 시 벤더 종속성 고려

## 보안 및 컴플라이언스

### 데이터 보호

**암호화:**

- 전송 중 암호화: TLS 1.2를 통한 NFS 트래픽 보호
- 저장 시 암호화: AWS KMS 키를 활용한 데이터 암호화
- 키 관리: 정기적인 키 로테이션 및 액세스 제어

**액세스 제어:**

- IAM 정책을 통한 세밀한 권한 관리
- POSIX 권한과 AWS 액세스 제어의 통합
- 네트워크 레벨 액세스 제어 (보안 그룹, NACL)

### 컴플라이언스 고려사항

**데이터 주권:**

- 지역별 데이터 보관 요구사항 준수
- 국경 간 데이터 전송 규제 대응
- 로컬 데이터 처리 요구사항 충족

**감사 및 로깅:**

- CloudTrail을 통한 API 호출 로깅
- VPC Flow Logs를 통한 네트워크 트래픽 모니터링
- 파일 액세스 로그 수집 및 분석

## 결론 및 권장사항

EKS Hybrid Nodes 환경에서 공유 파일 스토리지 구성은 전통적인 클러스터링 방식에서 클라우드 네이티브 접근법으로의 전환을 의미합니다. Amazon Linux 2023에서 pacemaker와 corosync 패키지가 제거된 것은 이러한 변화의 신호이며, 동시에 더 안정적이고 관리하기 쉬운 솔루션으로 나아갈 기회입니다.

**핵심 권장사항:**

1. **Amazon EFS 우선 고려**: 대부분의 사용 사례에서 최적의 선택으로, 복잡한 설정 없이 엔터프라이즈급 기능 제공
2. **기존 투자 보호**: 온프레미스 엔터프라이즈 스토리지가 있는 경우 CSI Driver를 통한 통합으로 투자 보호 및 클라우드 이점 확보
3. **단계적 접근**: 작은 규모로 시작하여 점진적으로 확장하는 방식으로 위험 최소화
4. **운영 자동화**: 수동 관리를 최소화하고 자동화된 모니터링 및 복구 체계 구축
5. **보안 우선**: 데이터 보호와 컴플라이언스 요구사항을 초기 설계 단계부터 고려

이러한 접근법을 통해 EKS Hybrid Nodes 환경에서 안정적이고 확장 가능하며 비용 효율적인 공유 파일 스토리지 솔루션을 구축할 수 있습니다.

---

### 참고 자료

- Amazon EKS Hybrid Nodes 공식 문서
- Amazon EFS 사용자 가이드
- EKS Hybrid Nodes 네트워크 베스트 프랙티스
- Dell PowerFlex EKS Hybrid Nodes 레퍼런스
- Amazon Linux 2023 릴리스 노트
- Kubernetes CSI 드라이버 개발 가이드
